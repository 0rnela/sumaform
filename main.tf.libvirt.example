provider "libvirt" {
  uri = "qemu:///system"
}

module "network" {
  source = "./modules/libvirt/network"
}

module "images" {
  source = "./modules/libvirt/images"
}

// Uncomment to use a package mirror
/*
module "package_mirror" {
  source = "./modules/libvirt/package_mirror"
  cc_username = "UC7"
  cc_password = // add password here
  data_pool = "data"
}
*/

module "suma3pg" {
  source = "./modules/libvirt/suse_manager"
  cc_username = "UC7"
  cc_password = // add password here
  name = "moio-suma3pg"
  
  // see modules/libvirt/suse_manager/variables.tf for possible values
  version = "3-nightly"
  
  // Uncomment below to make use of the package-mirror
  // package_mirror = "${module.package_mirror.hostname}"
}

module "clisles12sp1" {
  source = "./modules/libvirt/client"
  name = "moio-clisles12sp1"

  // see modules/libvirt/client/variables.tf for possible values
  image = "sles12sp1"
  server = "${module.suma3pg.hostname}"
  count = 1

  // Uncomment below to make use of the package-mirror
  // package_mirror = "${module.package_mirror.hostname}"
}

module "minionsles12sp1" {
  source = "./modules/libvirt/minion"
  name = "moio-minionsles12sp1"

  // see modules/libvirt/minion/variables.tf for possible values
  image = "sles12sp1"
  server = "${module.suma3pg.hostname}"
  count = 1

  // Uncomment below to make use of the package-mirror
  // package_mirror = "${module.package_mirror.hostname}"
}
